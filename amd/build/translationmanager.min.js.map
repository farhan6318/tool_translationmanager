{"version":3,"sources":["../src/translationmanager.js"],"names":["define","$","Config","ModalFactory","ModalEvents","Fragment","Ajax","getBody","formdata","contextid","M","cfg","loadFragment","init","on","e","preventDefault","recordid","attr","create","type","types","DEFAULT","body","then","modal","getModal","addClass","getRoot","hidden","destroy","show","data","serialize","target","id","promise","call","methodname","args","jsonformdata","window","location","reload"],"mappings":"AAAAA,OAAM,8CAAC,CAAC,QAAD,CAAW,aAAX,CAA0B,oBAA1B,CAAgD,mBAAhD,CAAsE,eAAtE,CAAuF,WAAvF,CAAD,CACF,SAASC,CAAT,CAAYC,CAAZ,CAAoBC,CAApB,CAAkCC,CAAlC,CAA+CC,CAA/C,CAAyDC,CAAzD,CAA+D,CAC3D,QAASC,CAAAA,CAAT,CAAiBC,CAAjB,CAA2B,IACjBC,CAAAA,CAAS,CAAGC,CAAC,CAACC,GAAF,CAAMF,SADD,CAIvB,MAAOJ,CAAAA,CAAQ,CAACO,YAAT,CAAsB,yBAAtB,CAAiD,kBAAjD,CAAqEH,CAArE,CADM,CAACD,QAAQ,CAARA,CAAD,CACN,CACV,CACD,MAAO,CACHK,IAAI,CAAE,eAAY,CACdZ,CAAC,CAAC,MAAD,CAAD,CAAUa,EAAV,CAAa,OAAb,CAAsB,kCAAtB,CAA4D,SAAUC,CAAV,CAAa,CACrEA,CAAC,CAACC,cAAF,GACA,GAAMC,CAAAA,CAAQ,CAAGhB,CAAC,CAAC,IAAD,CAAD,CAAQiB,IAAR,CAAa,eAAb,CAAjB,CACAf,CAAY,CAACgB,MAAb,CAAoB,CAChBC,IAAI,CAAEjB,CAAY,CAACkB,KAAb,CAAmBC,OADT,CAEhBC,IAAI,CAAEhB,CAAO,CAACU,CAAD,CAFG,CAApB,EAGGO,IAHH,CAGQ,SAASC,CAAT,CAAgB,CACpBA,CAAK,CAACC,QAAN,GAAiBC,QAAjB,CAA0B,UAA1B,EACAF,CAAK,CAACG,OAAN,GAAgBd,EAAhB,CAAmBV,CAAW,CAACyB,MAA/B,CAAuC,UAAW,CAC9CJ,CAAK,CAACK,OAAN,EACH,CAFD,EAGAL,CAAK,CAACM,IAAN,GACAN,CAAK,CAACG,OAAN,GAAgBd,EAAhB,CAAmB,OAAnB,CAA4B,6BAA5B,CAA2D,SAASC,CAAT,CAAY,CACnEA,CAAC,CAACC,cAAF,GACA,GAAIgB,CAAAA,CAAI,CAAG/B,CAAC,CAAC,QAAD,CAAD,CAAYgC,SAAZ,EAAX,CACAD,CAAI,CAAGA,CAAI,CAAG,UAAP,CAAoBjB,CAAC,CAACmB,MAAF,CAASC,EAApC,CACA,GAAIC,CAAAA,CAAO,CAAG9B,CAAI,CAAC+B,IAAL,CAAU,CAAC,CACrBC,UAAU,CAAE,qCADS,CAErBC,IAAI,CAAE,CAACC,YAAY,CAAER,CAAf,CAFe,CAAD,CAAV,CAAd,CAKAI,CAAO,CAAC,CAAD,CAAP,CAAWZ,IAAX,CAAiB,UAAW,CACpBC,CAAK,CAACK,OAAN,GACAW,MAAM,CAACC,QAAP,CAAgBC,MAAhB,IACP,CAHD,CAKH,CAdD,EAeAlB,CAAK,CAACG,OAAN,GAAgBd,EAAhB,CAAmB,OAAnB,CAA4B,YAA5B,CAA0C,SAAUC,CAAV,CAAa,CACnDA,CAAC,CAACC,cAAF,GACAS,CAAK,CAACK,OAAN,EACH,CAHD,CAIH,CA5BD,CA6BH,CAhCD,CAiCH,CAnCE,CAqCV,CA7CC,CAAN","sourcesContent":["define([\"jquery\", \"core/config\", \"core/modal_factory\", \"core/modal_events\",  \"core/fragment\", \"core/ajax\"],\n    function($, Config, ModalFactory, ModalEvents, Fragment, Ajax) {\n        function getBody(formdata) {\n            const contextid = M.cfg.contextid;\n            // Get the content of the modal.\n            var params = {formdata};\n            return Fragment.loadFragment(\"tool_translationmanager\", \"translation_form\", contextid, params);\n        }\n        return {\n            init: function () {\n                $('body').on('click', '[data-action=\\'translation-edit\\']', function (e) {\n                    e.preventDefault();\n                    const recordid = $(this).attr('data-recordid');\n                    ModalFactory.create({\n                        type: ModalFactory.types.DEFAULT,\n                        body: getBody(recordid)\n                    }).then(function(modal) {\n                        modal.getModal().addClass('modal-xl');\n                        modal.getRoot().on(ModalEvents.hidden, function() {\n                            modal.destroy();\n                        });\n                        modal.show();\n                        modal.getRoot().on('click', '#id_submitbutton, #id_reset', function(e) {\n                            e.preventDefault();\n                            var data = $('.mform').serialize();\n                            data = data + '&button=' + e.target.id;\n                            var promise = Ajax.call([{\n                                methodname: 'tool_translationmanager_update_data',\n                                args: {jsonformdata: data}\n                            }]);\n\n                            promise[0].then( function() {\n                                    modal.destroy();\n                                    window.location.reload(true);\n                            }\n                            );\n                        });\n                        modal.getRoot().on('click', '#id_cancel', function (e) {\n                            e.preventDefault();\n                            modal.destroy();\n                        });\n                    });\n                });\n            }\n        };\n    }\n);\n\n\n\n"],"file":"translationmanager.min.js"}